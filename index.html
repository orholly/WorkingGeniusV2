<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Genius Pairings Viewer - Grid</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Custom scrollbar for webkit browsers */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 4px; } /* Use default light gray */
        html.dark ::-webkit-scrollbar-track { background: #1e1e1e; } /* Use brand-gray-dark */
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; } /* Default slate */
        html.dark ::-webkit-scrollbar-thumb { background: #038da2; } /* Use brand-teal-dark */
        ::-webkit-scrollbar-thumb:hover { background: #64748b; } /* Default slate */
        html.dark ::-webkit-scrollbar-thumb:hover { background: #2dacb2; } /* Use brand-teal-light */

        /* Modal Transition Styles */
        .modal-backdrop {
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .modal-hidden {
            pointer-events: none; /* Prevent interaction when hidden */
            opacity: 0;
        }
        .modal-hidden .modal-backdrop {
            opacity: 0;
        }
        .modal-hidden .modal-content {
            opacity: 0;
            transform: translateY(20px) scale(0.95);
        }
        .modal-visible {
            pointer-events: auto; /* Allow interaction when visible */
            opacity: 1;
        }
        .modal-visible .modal-backdrop {
            opacity: 1;
        }
        .modal-visible .modal-content {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Grid Card Hover Effect */
        .pairing-card {
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, border-color 0.2s ease-out;
        }
        .pairing-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        html.dark .pairing-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.2);
            border-color: #2dacb2; /* brand-teal-light on hover */
        }


        /* Badge Styles */
        .type-badge { font-weight: 600; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.7rem; line-height: 1.2; text-transform: uppercase; letter-spacing: 0.05em; display: inline-flex; align-items: center; gap: 0.25rem; }
        .type-resp { color: #1e40af; background-color: #dbeafe; border: 1px solid #bfdbfe; }
        html.dark .type-resp { color: #93c5fd; background-color: #1e3a8a; border: 1px solid #1d4ed8; }
        .type-disrupt { color: #991b1b; background-color: #fee2e2; border: 1px solid #fecaca; }
        html.dark .type-disrupt { color: #fca5a5; background-color: #7f1d1d; border: 1px solid #b91c1c; }
        .type-mixed { color: #9d174d; background-color: #fce7f3; border: 1px solid #fbcfe8; }
        html.dark .type-mixed { color: #f9a8d4; background-color: #831843; border: 1px solid #be185d; }

        .value-badge {
            display: inline-flex; align-items: center; gap: 0.3rem;
            padding: 0.3rem 0.8rem; margin-right: 0.5rem; margin-bottom: 0.5rem;
            border-radius: 0.375rem;
            font-size: 1rem; /* text-base */
            font-weight: 500;
            border: 1px solid; /* Make border always visible */
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            cursor: default;
       }

        /* Specific badge colors (active state) */
        .value-badge.courageous { background-color: #f04b4d; color: #f6f7f8; border-color: #f04b4d; } /* brand-coral */
        .value-badge.humble { background-color: #d1de39; color: #1e1e1e; border-color: #d1de39; } /* brand-lime */
        .value-badge.empowering { background-color: #038da2; color: #f6f7f8; border-color: #038da2; } /* brand-teal-dark */
        .value-badge.connected { background-color: #2dacb2; color: #1e1e1e; border-color: #2dacb2; } /* brand-teal-light */
        .value-badge.kind { background-color: #f1ba1e; color: #1e1e1e; border-color: #f1ba1e; } /* brand-gold */

        html.dark .value-badge.courageous { background-color: #f04b4d; color: #f6f7f8; border-color: #f04b4d; }
        html.dark .value-badge.humble { background-color: #d1de39; color: #1e1e1e; border-color: #d1de39; }
        html.dark .value-badge.empowering { background-color: #038da2; color: #f6f7f8; border-color: #038da2; }
        html.dark .value-badge.connected { background-color: #2dacb2; color: #1e1e1e; border-color: #2dacb2; } /* Use dark text on light teal */
        html.dark .value-badge.kind { background-color: #f1ba1e; color: #1e1e1e; border-color: #f1ba1e; }

        /* Grayed-out badge style (applied via JS) - Using Brand Grays */
        .value-badge-gray {
            background-color: #f3f4f6; /* Lighter standard gray for light mode */
            color: #9ca3af; /* gray-400 */
            border-color: #e5e7eb; /* gray-200 */
        }
        html.dark .value-badge-gray {
            background-color: #374151; /* gray-700 */
            color: #9ca3af; /* gray-400 (adjust if needed for contrast) */
            border-color: #4b5563; /* gray-600 */
            opacity: 0.7; /* Adjust opacity if needed */
        }
         /* Ensure icon color matches text color for gray badges */
        .value-badge-gray svg {
            stroke: #9ca3af; /* gray-400 */
        }
        html.dark .value-badge-gray svg {
             stroke: #9ca3af; /* gray-400 */
        }


        /* Genius Name Highlighting */
        .interaction-text strong, .modal-interaction-text strong {
            font-weight: 600;
            border-radius: 0.25em;
            transition: background-color 0.2s ease, color 0.2s ease;
            padding: 0.05em 0.2em;
            margin: -0.05em -0.2em;
        }
        /* Light Mode Highlighting */
        .interaction-text strong.wonder, .modal-interaction-text strong.wonder { color: #f6f7f8; background-color: #038da2;}
        .interaction-text strong.invention, .modal-interaction-text strong.invention { color: #f6f7f8; background-color: #2f1749;}
        .interaction-text strong.discernment, .modal-interaction-text strong.discernment { color: #1e1e1e; background-color: #2dacb2;}
        .interaction-text strong.galvanizing, .modal-interaction-text strong.galvanizing { color: #f6f7f8; background-color: #f04b4d;}
        .interaction-text strong.enablement, .modal-interaction-text strong.enablement { color: #1e1e1e; background-color: #d1de39;}
        .interaction-text strong.tenacity, .modal-interaction-text strong.tenacity { color: #1e1e1e; background-color: #f1ba1e;}
        /* Dark Mode Highlighting */
        html.dark .interaction-text strong.wonder, html.dark .modal-interaction-text strong.wonder { color: #f6f7f8; background-color: #038da2;}
        html.dark .interaction-text strong.invention, html.dark .modal-interaction-text strong.invention { color: #f6f7f8; background-color: #4b5563;} /* gray-600 */
        html.dark .interaction-text strong.discernment, html.dark .modal-interaction-text strong.discernment { color: #1e1e1e; background-color: #2dacb2;}
        html.dark .interaction-text strong.galvanizing, html.dark .modal-interaction-text strong.galvanizing { color: #f6f7f8; background-color: #f04b4d;}
        html.dark .interaction-text strong.enablement, html.dark .modal-interaction-text strong.enablement { color: #1e1e1e; background-color: #d1de39;}
        html.dark .interaction-text strong.tenacity, html.dark .modal-interaction-text strong.tenacity { color: #1e1e1e; background-color: #f1ba1e;}

        /* Modal Section Headers */
        .modal-section-header {
            display: flex; align-items: center; gap: 0.5rem;
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; margin-bottom: 1rem;
        }

        /* Modal Dialogue Section Styling */
        .modal-dialogue-item { display: flex; align-items: flex-start; gap: 0.75rem; padding: 0.5rem 0; }
        .modal-dialogue-item svg { flex-shrink: 0; margin-top: 0.2em; }
        .modal-dialogue-item strong { font-weight: 600; display: block; margin-bottom: 0.1rem; }

        /* Craves/Crushes Styling */
        .modal-craves-crushes-item { display: flex; align-items: flex-start; gap: 0.75rem; padding: 0.3rem 0; }
        .modal-craves-crushes-item svg { flex-shrink: 0; margin-top: 0.25em; }
        .modal-craves-crushes-item strong { font-weight: 600; display: inline-block; margin-right: 0.4rem; }
        .modal-craves-crushes-item .genius-label { font-weight: 600; margin-left: 0.2rem; font-size: 0.9em; opacity: 0.8; }


        /* Utility for focus rings */
        .focus-ring:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus-ring:focus-visible {
            outline: 2px solid transparent;
            outline-offset: 2px;
            /* Using brand color for focus ring */
            box-shadow: 0 0 0 3px #2dacb280; /* brand-teal-light with opacity */
        }
        html.dark .focus-ring:focus-visible {
             box-shadow: 0 0 0 3px #2dacb2b0; /* brand-teal-light with more opacity */
        }

        /* Styling for the section containers inside the modal */
        .modal-section-container {
            border-radius: 0.5rem;
            padding: 1.25rem;
            background-color: #ffffff;
            border: 1px solid #e5e7eb; /* gray-200 */
        }
        html.dark .modal-section-container {
             background-color: #1f2937; /* gray-800 */
             border-color: #038da2; /* brand-teal-dark */
        }

        /* Overview section specific label styling */
        .overview-label {
            font-size: 0.875rem; /* text-sm */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        /* Styling for the inner cards within the Overview section */
        .overview-card {
            background-color: #f9fafb; /* gray-50 */
            border: 1px solid #f3f4f6; /* gray-100 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.75rem; /* p-3 */
        }
        html.dark .overview-card {
             background-color: #1e1e1e; /* brand-gray-dark */
             border-color: #038da2; /* brand-teal-dark */
        }

        /* Utility to extract emoji/icon from name */
        .pairing-icon {
            font-size: 1.125em; /* text-lg */
            line-height: 1;
        }
        .pairing-name-text {
             /* Styles for the text part of the name if needed */
        }

        /* Sort/Theme Button Styles */
        .toggle-button {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* pill shape */
            font-size: 0.75rem; /* text-xs */
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            border: 1px solid transparent;
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
        }
        /* Inactive state */
        .toggle-button {
            background-color: transparent;
            color: inherit; /* Inherit from body */
        }
        html.light .toggle-button:hover {
            background-color: #e5e7eb; /* gray-200 */
        }
        html.dark .toggle-button {
             color: #f6f7f8a0; /* brand-gray-light slightly transparent */
        }
         html.dark .toggle-button:hover {
            background-color: #038da240; /* brand-teal-dark transparent */
            color: #f6f7f8;
        }

        /* Active state */
        .toggle-button-active {
             background-color: #e5e7eb; /* gray-200 */
             border-color: #d1d5db; /* gray-300 */
             color: #1f2937; /* gray-800 */
        }
         html.dark .toggle-button-active {
             background-color: #038da2; /* brand-teal-dark */
             border-color: #2dacb2; /* brand-teal-light */
             color: #f6f7f8; /* brand-gray-light */
        }
         html.dark .toggle-button-active:hover {
            background-color: #038da2; /* Keep same on hover */
            color: #f6f7f8;
        }
        /* Ensure icons within buttons inherit color and have appropriate size */
         .toggle-button svg {
             width: 0.875em; /* Slightly smaller than text */
             height: 0.875em;
             stroke-width: 2.5; /* Match other icons */
             flex-shrink: 0; /* Prevent icon shrinking */
        }

    </style>
    <script>
        // Set theme ASAP to avoid FOUC (Flash of Unstyled Content)
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.className = savedTheme;

        // Tailwind config (to extend theme with custom brand colors)
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'brand-teal-dark': '#038da2',
                        'brand-lime': '#d1de39',
                        'brand-purple': '#2f1749', // Keep purple definition if needed elsewhere, but avoid for backgrounds
                        'brand-teal-light': '#2dacb2',
                        'brand-coral': '#f04b4d',
                        'brand-gold': '#f1ba1e',
                        'brand-gray-dark': '#1e1e1e',
                        'brand-gray-light': '#f6f7f8',
                        // Add Tailwind grays used in custom CSS if needed for consistency
                        'gray-800': '#1f2937',
                        'gray-700': '#374151',
                        'gray-600': '#4b5563',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
 <body class="bg-brand-gray-light dark:bg-brand-gray-dark text-brand-gray-dark dark:text-brand-gray-light flex flex-col items-center justify-start min-h-screen p-4 sm:p-6 lg:p-8 pt-8 sm:pt-12 transition-colors duration-300">

    <header class="w-full max-w-6xl mx-auto mb-4 md:mb-6 text-center px-4"> <h1 class="text-3xl sm:text-4xl font-extrabold text-brand-gray-dark dark:text-brand-gray-light mb-2">
            Working Genius Pairings
        </h1>
        <p class="text-base sm:text-lg text-slate-600 dark:text-slate-400"> Explore the dynamics of different Working Genius combinations along with Victory CHECK values!<br> Click a card for details.
        </p>
    </header>

    <div class="w-full max-w-6xl mx-auto px-4 mb-6 md:mb-8 flex justify-between items-center">
        <div class="bg-white dark:bg-gray-800 rounded-full shadow-md p-1 flex items-center space-x-1">
            <button id="sort-alpha-button" class="toggle-button" aria-pressed="true" title="Sort Alphabetically by Letters">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="10" x2="10" y1="15" y2="3"/><path d="M7 3H13"/><path d="M12 3v12"/><path d="M7 15h7"/><path d="M17 15l4 4-4 4"/><path d="M21 19H7"/></svg>
                 <span class="hidden sm:inline">Alpha</span> </button>
            <button id="sort-rank-button" class="toggle-button" aria-pressed="false" title="Sort by Rank">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="10" x2="21" y1="6" y2="6"/><line x1="10" x2="21" y1="12" y2="12"/><line x1="10" x2="21" y1="18" y2="18"/><path d="M4 6h1v4"/><path d="M4 10h2"/><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
                 <span class="hidden sm:inline">Rank</span> </button>
           </div>

        <div class="bg-white dark:bg-gray-800 rounded-full shadow-md p-1 flex items-center space-x-1">
           <button id="theme-light-button" class="toggle-button" aria-pressed="false" title="Switch to Light Theme">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="text-brand-gold"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                 <span class="hidden sm:inline">Light</span>
           </button>
           <button id="theme-dark-button" class="toggle-button" aria-pressed="false" title="Switch to Dark Theme">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="text-brand-purple dark:text-brand-teal-light"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                 <span class="hidden sm:inline">Dark</span>
           </button>
         </div>
    </div>

    <main class="w-full max-w-6xl mx-auto px-2">
        <div id="pairings-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-5">
            <p class="text-center text-slate-500 dark:text-slate-400 text-lg py-10 col-span-full">Loading pairings...</p>
        </div>
    </main>

    <div id="pairing-modal" class="fixed inset-0 z-[60] flex items-center justify-center p-4 modal-hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-70 dark:bg-opacity-80" aria-hidden="true"></div>
        <div class="modal-content relative bg-brand-gray-light dark:bg-brand-gray-dark rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto flex flex-col">
            <div class="flex items-start justify-between p-4 sticky top-0 bg-brand-gray-light dark:bg-brand-gray-dark z-10">
                <div>
                     <h2 id="modal-title" class="text-2xl font-semibold text-brand-gray-dark dark:text-brand-gray-light">Pairing Name</h2>
                     <p id="modal-subtitle" class="text-base text-slate-500 dark:text-brand-gray-light/80">Rank X/15 (Y.Y%)</p> </div>
                <button id="modal-close-button" type="button" class="text-slate-400 dark:text-slate-400 bg-transparent hover:bg-slate-200 dark:hover:bg-gray-700 rounded-full text-sm p-1.5 ml-auto inline-flex items-center focus-ring" aria-label="Close modal">
                     <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="p-4 md:p-6 space-y-4 flex-grow text-brand-gray-dark dark:text-brand-gray-light">
                <div class="modal-section-container">
                     <h3 class="modal-section-header text-brand-teal-dark dark:text-brand-teal-light">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                         <span>Overview</span>
                     </h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-base">
                         <div class="overview-card">
                             <strong class="overview-label font-semibold">Core Strength</strong>
                             <p id="modal-core-strength" class="leading-relaxed italic"></p>
                         </div>
                         <div class="overview-card">
                             <strong class="overview-label font-semibold">Pairing Type</strong>
                             <p><span id="modal-pairing-type-badge" class="type-badge">Type</span></p>
                             <p id="modal-pairing-type-tooltip" class="leading-relaxed italic mt-1">Tooltip</p>
                         </div>
                     </div>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-teal-light dark:text-brand-teal-light">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>
                         <span>CHECK Value Alignment</span>
                     </h3>
                     <div id="modal-value-badges" class="mb-3 flex flex-wrap"></div>
                     <p id="modal-value-rationale" class="text-base leading-relaxed"></p>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-gold dark:text-brand-gold">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                         <span>Inspirational Quote</span>
                     </h3>
                      <blockquote id="modal-quote" class="border-l-4 border-brand-gold dark:border-brand-gold pl-4 italic text-base"></blockquote>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-teal-dark dark:text-brand-teal-light">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3 4 7l4 4"/><path d="M4 7h16"/><path d="m16 21 4-4-4-4"/><path d="M20 17H4"/></svg>
                         <span>Genius Interaction</span>
                     </h3>
                      <div id="modal-interaction" class="modal-interaction-text text-base space-y-3 leading-relaxed"></div>
                 </div>
                 <div class="modal-section-container">
                    <h3 class="modal-section-header text-brand-purple dark:text-brand-teal-light">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg> <span>Craves & Crushes</span>
                    </h3>
                    <div id="modal-craves-crushes" class="text-base space-y-2">
                        </div>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-coral dark:text-brand-coral">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
                         <span>Common Challenges</span>
                     </h3>
                     <p id="modal-challenges" class="text-base leading-relaxed"></p>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-coral dark:text-brand-coral">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>
                         <span>Unhealthy Tendencies</span>
                     </h3>
                     <p id="modal-tendencies" class="text-base leading-relaxed"></p>
                 </div>
                 <div class="modal-section-container">
                      <h3 class="modal-section-header text-brand-purple dark:text-brand-lime">
                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
                         <span>Inner Dialogue</span>
                     </h3>
                      <div class="space-y-3 text-base">
                          <div class="modal-dialogue-item">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-brand-lime"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                             <div><strong class="text-brand-lime">Productive:</strong> <span id="modal-dialogue-productive"></span></div>
                          </div>
                          <div class="modal-dialogue-item">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-brand-gold"><circle cx="12" cy="12" r="10"/><path d="M16 16s-1.5-2-4-2-4 2-4 2"/><path d="M9 9h.01"/><path d="M15 9h.01"/></svg>
                             <div><strong class="text-brand-gold">Frustrated:</strong> <span id="modal-dialogue-challenged"></span></div>
                          </div>
                          <div class="modal-dialogue-item">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-brand-teal-light"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                             <div><strong class="text-brand-teal-light">Growth Check:</strong> <span id="modal-dialogue-growth"></span></div>
                          </div>
                     </div>
                 </div>
            </div>
        </div>
    </div>

    <footer class="w-full max-w-6xl mx-auto mt-8 md:mt-12 text-center text-sm text-slate-500 dark:text-slate-400 pb-4">
        Working Genius concepts &copy; The Table Group. Viewer created for illustrative purposes.
    </footer>


    <script>
        // --- Data (Standardized Letters) ---
        // Updated cravesAndCrushes structure to include genius association
        const pairingsData = [
             // 1. ET / TE
             { name: "✅ The Loyal Finisher", letters: "ET / TE", coreStrength: "Being dependable, low-maintenance contributors who hold themselves accountable for delivering on promises.", rank: 1, frequency: 15.95, type: "Mixed",
               interaction: [
                    "<strong class='tenacity'>Tenacity</strong> makes sure <strong class='enablement'>Enablement</strong>'s desire to help leads to completed actions and reliable follow-through.",
                    "<strong class='enablement'>Enablement</strong> provides the practical support that helps <strong class='tenacity'>Tenacity</strong> push through and finish well."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "E", text: "Appreciation: Want acknowledgement for their inherent value (not necessarily recognition)." },
                        { genius: "T", text: "Clarity: Want deadlines and parameters." }
                    ],
                    crushes: [
                        { genius: "E", text: "Being overlooked: Dislike when efforts are taken for granted or ignored." },
                        { genius: "T", text: "Ambiguity: Dislike unclear standards, directions, or changing expectations." }
                    ]
               },
               challenges: "Having a hard time saying 'no' to requests, leading to over-commitment, burnout, and lack of appreciation.", tendencies: "Taking on too many tasks without prioritizing or becoming resentful due to feeling overloaded and unacknowledged.", dialogue: { productive: "I'll make sure this gets done and will help out wherever needed.", challenged: "Why am I always the one who has to pick up the slack and finish everything?", growth: "Am I being helpful and reliable, or just spreading myself too thin?" }, valueAlignments: ["Humble", "Connected"], valueRationale: "Their reliability and responsiveness to needs show dependability and relational focus." },
             // 2. EG / GE
             { name: "🎉 The Enthusiastic Encourager", letters: "EG / GE", coreStrength: "Being positive, exuberant, and optimistic cheerleaders for others.", rank: 2, frequency: 9.29, type: "Mixed",
               interaction: [
                    "<strong class='galvanizing'>Galvanizing</strong> identifies clear opportunities for <strong class='enablement'>Enablement</strong> to step in and support, giving their help a purpose.",
                    "<strong class='enablement'>Enablement</strong> brings hands-on encouragement that makes <strong class='galvanizing'>Galvanizing</strong>’s calls to action truly effective."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "G", text: "Reaction: Want engagement and confirmation that their advocated cause is real/worthwhile." },
                        { genius: "E", text: "Appreciation: Want acknowledgement for their inherent value (not necessarily recognition)." }
                    ],
                    crushes: [
                        { genius: "G", text: "Apathy: Hate when no one responds or enthusiasm is met with silence." },
                        { genius: "E", text: "Being overlooked: Dislike when efforts are taken for granted or ignored." }
                    ]
               },
               challenges: "Being too quick to affirm others or provide unwarranted praise, potentially leading to being dismissed as naïve or insincere.", tendencies: "Avoiding necessary critical feedback or over-promising support they cannot deliver in their enthusiasm.", dialogue: { productive: "That's fantastic! I'm excited to support you in achieving this!", challenged: "Why isn't everyone else as positive and encouraging as I am?", growth: "Am I genuinely lifting others up, or just avoiding difficult truths?" }, valueAlignments: ["Empowering", "Kind"], valueRationale: "They enthusiastically encourage and support the growth of others." },
             // 3. DE / ED
             { name: "🤝 The Insightful Collaborator", letters: "DE / ED", coreStrength: "Offering exceptional, timely, and shrewd support in a selfless manner.", rank: 3, frequency: 8.87, type: "Responsive",
               interaction: [
                    "<strong class='enablement'>Enablement</strong> turns <strong class='discernment'>Discernment</strong>'s gut-level insights into supportive, practical help for others.",
                    "<strong class='discernment'>Discernment</strong> guides <strong class='enablement'>Enablement</strong> by sensing what people need and when, making their help truly timely."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "D", text: "Trust: Want you to trust their judgment, instincts, and assessment." },
                        { genius: "E", text: "Appreciation: Want acknowledgement for their inherent value (not necessarily recognition)." }
                    ],
                    crushes: [
                        { genius: "D", text: "\"Prove it\": Dislike having to argue for people to believe their gut feeling." },
                        { genius: "E", text: "Being overlooked: Dislike when efforts are taken for granted or ignored." }
                    ]
               },
               challenges: "Hesitating to push people to heed their advice and being deferential when they sense resistance, often leading to feeling underappreciated.", tendencies: "Over-accommodating others' needs at the expense of their own judgment or becoming passive in offering their valuable insights.", dialogue: { productive: "I have a sense of how I can best support you with this; what do you need?", challenged: "Why doesn't anyone realize how much I'm doing and the good advice I have?", growth: "Am I genuinely helping, or just enabling others to avoid responsibility?" }, valueAlignments: ["Humble", "Empowering"], valueRationale: "They provide empathetic and selfless support to others." },
             // 4. EW / WE
             { name: "🌟 The Idealistic Supporter", letters: "EW / WE", coreStrength: "Being valuable, low-maintenance team members with deep care for the bigger picture.", rank: 4, frequency: 7.55, type: "Responsive",
               interaction: [
                    "<strong class='wonder'>Wonder</strong> grounds <strong class='enablement'>Enablement</strong>'s efforts in purpose and vision, making their support feel meaningful.",
                    "<strong class='enablement'>Enablement</strong> brings <strong class='wonder'>Wonder</strong>’s thoughtful questions to life by helping causes and people they care about."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "W", text: "Consideration: Want people to genuinely consider their questions." },
                        { genius: "E", text: "Appreciation: Want acknowledgement for their inherent value (not necessarily recognition)." }
                    ],
                    crushes: [
                        { genius: "W", text: "Being dismissed: Dislike hearing \"Who cares!?\" or \"We don't have time for that.\"" },
                        { genius: "E", text: "Being overlooked: Dislike when efforts are taken for granted or ignored." }
                    ]
               },
               challenges: "Being overly deferential and hesitating to initiate change, preferring to let others make the first move, and disliking being overlooked.", tendencies: "Silently contributing without voicing their own ideas or feeling resentful when their efforts are taken for granted.", dialogue: { productive: "I wonder how I can best support this important cause.", challenged: "Why doesn't anyone notice how much I'm contributing?", growth: "Am I being helpful, or just avoiding taking a stand?" }, valueAlignments: ["Humble", "Connected"], valueRationale: "Their selfless support for meaningful causes and idealism highlight modesty and relational care." },
             // 5. DT / TD
             { name: "🛠️ The Judicious Accomplisher", letters: "DT / TD", coreStrength: "Prudent, focused, and diligent completion of high-priority tasks.", rank: 5, frequency: 7.07, type: "Mixed",
               interaction: [
                    "<strong class='tenacity'>Tenacity</strong> ensures <strong class='discernment'>Discernment</strong>'s wise judgments result in action and completion.",
                    "<strong class='discernment'>Discernment</strong> helps <strong class='tenacity'>Tenacity</strong> focus on what matters most, avoiding wasted effort."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "D", text: "Trust: Want you to trust their judgment, instincts, and assessment." },
                        { genius: "T", text: "Clarity: Want deadlines and parameters." }
                    ],
                    crushes: [
                        { genius: "D", text: "\"Prove it\": Dislike having to argue for people to believe their gut feeling." },
                        { genius: "T", text: "Ambiguity: Dislike unclear standards, directions, or changing expectations." }
                    ]
               },
               challenges: "Feeling unnecessary angst about potential failure and frustration when working with others who don't share their high standards for closure.", tendencies: "Being overly critical of others' work or becoming fixated on efficiency at the expense of collaboration or flexibility.", dialogue: { productive: "We need to prioritize this and ensure it's done to a high standard.", challenged: "Why don't others have the same sense of urgency and commitment to quality?", growth: "Am I being appropriately focused on results, or too rigid in my expectations?" }, valueAlignments: ["Courageous", "Humble"], valueRationale: "Their drive to complete high-standard tasks reflects boldness and diligence." },
             // 6. GT / TG
             { name: "🚀 The Assertive Driver", letters: "GT / TG", coreStrength: "Being highly driven individuals with high conviction and standards who get things done.", rank: 6, frequency: 6.00, type: "Disruptive",
               interaction: [
                    "<strong class='tenacity'>Tenacity</strong> delivers the follow-through needed to bring <strong class='galvanizing'>Galvanizing</strong>'s momentum to completion.",
                    "<strong class='galvanizing'>Galvanizing</strong> energizes <strong class='tenacity'>Tenacity</strong>'s drive, helping rally others to support what needs to get done."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "G", text: "Reaction: Want engagement and confirmation that their advocated cause is real/worthwhile." },
                        { genius: "T", text: "Clarity: Want deadlines and parameters." }
                    ],
                    crushes: [
                        { genius: "G", text: "Apathy: Hate when no one responds or enthusiasm is met with silence." },
                        { genius: "T", text: "Ambiguity: Dislike unclear standards, directions, or changing expectations." }
                    ]
               },
               challenges: "Sometimes being seen as pushy and being impatient with too much planning and brainstorming, preferring to get right to work.", tendencies: "Being overly directive and dismissive of others' input or prioritizing speed and completion over thoroughness and collaboration.", dialogue: { productive: "We need to move quickly and get this across the finish line!", challenged: "Why is everyone so hesitant and unwilling to take decisive action?", growth: "Am I being effectively assertive in driving results, or just being impatient and controlling?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They boldly champion new ideas and inspire action in others." },
             // 7. EI / IE
             { name: "🎨 The Adaptable Designer", letters: "EI / IE", coreStrength: "Being creative, flexible, open to feedback, and easy to work with in developing solutions for others.", rank: 7, frequency: 5.93, type: "Mixed",
               interaction: [
                    "<strong class='invention'>Invention</strong> offers creative solutions shaped by what <strong class='enablement'>Enablement</strong> knows others actually need.",
                    "<strong class='enablement'>Enablement</strong> helps <strong class='invention'>Invention</strong> refine their ideas with practical, real-world insight."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "I", text: "Freedom: Want the freedom to create and invent without constraints." },
                        { genius: "E", text: "Appreciation: Want acknowledgement for their inherent value (not necessarily recognition)." }
                    ],
                    crushes: [
                        { genius: "I", text: "Constraint: Dislike restrictive parameters or being forced 'inside the box'." },
                        { genius: "E", text: "Being overlooked: Dislike when efforts are taken for granted or ignored." }
                    ]
               },
               challenges: "Being too quick to accommodate and avoid advocating for their own ideas, potentially leaving them feeling undervalued.", tendencies: "Suppressing their own creative insights to please others or over-committing to implement others' ideas without fully considering their own.", dialogue: { productive: "Let's brainstorm some new ways to support what you need.", challenged: "Why does everyone else's vision always take priority over my creative ideas?", growth: "Am I being adaptable and helpful, or just letting others' needs overshadow my own?" }, valueAlignments: ["Empowering", "Connected"], valueRationale: "They create flexible solutions while collaborating and serving the needs of others." },
             // 8. DG / GD
             { name: "🔥 The Intuitive Activator", letters: "DG / GD", coreStrength: "Making rapid, surprisingly accurate assessments and inspiring action.", rank: 8, frequency: 5.70, type: "Mixed",
               interaction: [
                    "<strong class='galvanizing'>Galvanizing</strong> transforms <strong class='discernment'>Discernment</strong>'s intuitive judgments into action by rallying people behind them.",
                    "<strong class='discernment'>Discernment</strong> helps <strong class='galvanizing'>Galvanizing</strong> focus on which efforts are truly worth pushing forward."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "D", text: "Trust: Want you to trust their judgment, instincts, and assessment." },
                        { genius: "G", text: "Reaction: Want engagement and confirmation that their advocated cause is real/worthwhile." }
                    ],
                    crushes: [
                        { genius: "D", text: "\"Prove it\": Dislike having to argue for people to believe their gut feeling." },
                        { genius: "G", text: "Apathy: Hate when no one responds or enthusiasm is met with silence." }
                    ]
               },
               challenges: "Sometimes being cavalier in their declarations and appearing impatient or dismissive when made to consider critical details for implementation.", tendencies: "Pushing forward with gut feelings without sufficient consideration or dismissing others' concerns as slowing progress.", dialogue: { productive: "I have a strong feeling about this direction; let's get moving on it!", challenged: "Why is everyone so hesitant when the path forward is clear?", growth: "Am I being decisive and action-oriented, or just rushing to judgment?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They make bold decisions and inspire action in others." },
             // 9. IT / TI
             { name: "🏗️ The Methodical Architect", letters: "IT / TI", coreStrength: "Being precise, reliable, and planful solvers of problems with a unique blend of innovative thinking and practical implementation.", rank: 9, frequency: 5.38, type: "Disruptive",
               interaction: [
                    "<strong class='tenacity'>Tenacity</strong> brings the structure and focus needed to implement <strong class='invention'>Invention</strong>’s creative concepts.",
                    "<strong class='invention'>Invention</strong> injects fresh thinking into <strong class='tenacity'>Tenacity</strong>'s efforts, preventing them from getting stuck in routine."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "I", text: "Freedom: Want the freedom to create and invent without constraints." },
                        { genius: "T", text: "Clarity: Want deadlines and parameters." }
                    ],
                    crushes: [
                        { genius: "I", text: "Constraint: Dislike restrictive parameters or being forced 'inside the box'." },
                        { genius: "T", text: "Ambiguity: Dislike unclear standards, directions, or changing expectations." }
                    ]
               },
               challenges: "Sometimes missing the nuance of a situation or overlooking human needs in their dogged pursuit of a workable solution.", tendencies: "Becoming overly focused on the details of the plan and losing sight of the bigger picture or the impact on people.", dialogue: { productive: "I've designed an innovative yet practical solution that we can implement systematically.", challenged: "Everyone's too caught up in emotions and politics to see how elegant this solution is.", growth: "Am I balancing creative problem-solving with practical implementation needs?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They combine methodical execution with practical problem-solving." },
             // 10. DI / ID
             { name: "🧠 The Discriminating Ideator", letters: "DI / ID", coreStrength: "Creative problem-solving with a strong sense of what will actually work.", rank: 10, frequency: 5.20, type: "Mixed",
               interaction: [
                    "<strong class='discernment'>Discernment</strong> helps <strong class='invention'>Invention</strong> identify which ideas are most likely to succeed, acting as a reality check.",
                    "<strong class='invention'>Invention</strong> keeps <strong class='discernment'>Discernment</strong> engaged with original ideas to evaluate and improve."
               ],
               cravesAndCrushes: {
                   craves: [
                        { genius: "I", text: "Freedom: Want the freedom to create and invent without constraints." }, // Changed from D to I based on PDF page 6
                        { genius: "D", text: "Trust: Want you to trust their judgment, instincts, and assessment." } // Changed from I to D based on PDF page 6
                    ],
                    crushes: [
                        { genius: "I", text: "Constraint: Dislike restrictive parameters or being forced 'inside the box'." }, // Changed from D to I
                        { genius: "D", text: "\"Prove it\": Dislike having to argue for people to believe their gut feeling." } // Changed from I to D
                    ]
               },
               challenges: "Appearing impatient and over-confident when their ideas face pushback, and losing interest after the initial inventive phase.", tendencies: "Dismissing others' ideas prematurely or becoming disengaged once the problem-solving sparks fade.", dialogue: { productive: "Here's a new way to approach this; I have a strong feeling it will work well.", challenged: "Why can't people see that my idea is the best solution?", growth: "Am I being genuinely confident in my ideas, or just dismissive of alternatives?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They confidently generate new ideas and practical solutions." },
             // 11. TW / WT
             { name: "📝 The Careful Implementer", letters: "TW / WT", coreStrength: "Being thorough, practical, and careful contributors with a blend of steady reliability and quiet depth.", rank: 11, frequency: 5.11, type: "Mixed",
               interaction: [
                    "<strong class='wonder'>Wonder</strong> encourages <strong class='tenacity'>Tenacity</strong> to understand the 'why' behind tasks, bringing thoughtfulness to their work.",
                    "<strong class='tenacity'>Tenacity</strong> channels <strong class='wonder'>Wonder</strong>'s questions into focused, meaningful execution."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "W", text: "Consideration: Want people to genuinely consider their questions." },
                        { genius: "T", text: "Clarity: Want deadlines and parameters." }
                    ],
                    crushes: [
                        { genius: "W", text: "Being dismissed: Dislike hearing \"Who cares!?\" or \"We don't have time for that.\"" },
                        { genius: "T", text: "Ambiguity: Dislike unclear standards, directions, or changing expectations." }
                    ]
               },
               challenges: "Getting bogged down in questioning and delaying action, or pushing forward with tasks without fully understanding their purpose.", tendencies: "Getting bogged down in questioning and delaying action, or pushing forward with tasks without fully understanding their purpose.", dialogue: { productive: "To do this well, I need to understand why it's important and the best way to approach it.", challenged: "Why am I being asked to do this without a clear explanation or purpose?", growth: "Am I being thoughtfully diligent, or just overanalyzing and procrastinating?" }, valueAlignments: ["Humble", "Connected"], valueRationale: "Their thoughtful and practical implementation stems from understanding purpose and showing diligence." },
             // 12. GI / IG
             { name: "📣 The Evangelizing Innovator", letters: "GI / IG", coreStrength: "Being excitable and convincing promoters of new ideas with infectious enthusiasm.", rank: 12, frequency: 5.07, type: "Disruptive",
               interaction: [
                    "<strong class='invention'>Invention</strong> sparks bold new ideas that <strong class='galvanizing'>Galvanizing</strong> passionately promotes and spreads.",
                    "<strong class='galvanizing'>Galvanizing</strong> brings energy and visibility to <strong class='invention'>Invention</strong>’s breakthroughs, inspiring others to act."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "I", text: "Freedom: Want the freedom to create and invent without constraints." },
                        { genius: "G", text: "Reaction: Want engagement and confirmation that their advocated cause is real/worthwhile." }
                    ],
                    crushes: [
                        { genius: "I", text: "Constraint: Dislike restrictive parameters or being forced 'inside the box'." },
                        { genius: "G", text: "Apathy: Hate when no one responds or enthusiasm is met with silence." }
                    ]
               },
               challenges: "Being hasty to start selling ideas before fully considering their prudence and potentially being perceived as slightly over-the-top in their approach.", tendencies: "Aggressively pushing forward with underdeveloped ideas or becoming overly invested in the initial excitement without considering long-term viability.", dialogue: { productive: "I've got a breakthrough idea, and I know you'll be as excited about it as I am!", challenged: "Why isn't everyone else seeing the potential of this amazing innovation?", growth: "Am I truly committed to this idea, or just excited about getting others on board?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They boldly champion new ideas and inspire others to act on them." },
             // 13. IW / WI
             { name: "🌈 The Creative Dreamer", letters: "IW / WI", coreStrength: "Being passionate idealists with an endless stream of big questions and ideas, comfortable with abstract thinking.", rank: 13, frequency: 4.98, type: "Mixed",
               interaction: [
                    "<strong class='wonder'>Wonder</strong> sparks big questions that inspire <strong class='invention'>Invention</strong> to create imaginative possibilities.",
                    "<strong class='invention'>Invention</strong> brings <strong class='wonder'>Wonder</strong>’s idealistic thinking into sharper focus with tangible, creative ideas."
               ],
               cravesAndCrushes: {
                   craves: [
                        { genius: "W", text: "Consideration: Want people to genuinely consider their questions." },
                        { genius: "I", text: "Freedom: Want the freedom to create and invent without constraints." }
                    ],
                    crushes: [
                        { genius: "W", text: "Being dismissed: Dislike hearing \"Who cares!?\" or \"We don't have time for that.\"" },
                        { genius: "I", text: "Constraint: Dislike restrictive parameters or being forced 'inside the box'." }
                    ]
               },
               challenges: "Not valuing practicality, focus, or implementation as much as idealism and ingenuity, sometimes leading to stress for those seeking realism and action.", tendencies: "Generating endless ideas without considering their feasibility or becoming dismissive of practical constraints.", dialogue: { productive: "I have so many questions and ideas about how things could be different!", challenged: "Why is everyone so stuck in the old ways when there are better paths forward?", growth: "Am I exploring possibilities with purpose, or avoiding reality with ideas?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They encourage others with a visionary approach, balancing enthusiasm and drive." },
             // 14. DW / WD
             { name: "🧘 The Contemplative Counselor", letters: "DW / WD", coreStrength: "Offering insightful and nuanced advice using impactful words.", rank: 14, frequency: 4.88, type: "Responsive",
               interaction: [
                    "<strong class='discernment'>Discernment</strong> helps <strong class='wonder'>Wonder</strong> focus their deep questions into meaningful insights.",
                    "<strong class='wonder'>Wonder</strong> expands <strong class='discernment'>Discernment</strong>’s lens by offering new angles and reflections to consider."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "W", text: "Consideration: Want people to genuinely consider their questions." },
                        { genius: "D", text: "Trust: Want you to trust their judgment, instincts, and assessment." }
                    ],
                    crushes: [
                        { genius: "W", text: "Being dismissed: Dislike hearing \"Who cares!?\" or \"We don't have time for that.\"" },
                        { genius: "D", text: "\"Prove it\": Dislike having to argue for people to believe their gut feeling." }
                    ]
               },
               challenges: "Hesitating to declare certainty or express confidence in their own judgments due to their proclivity for nuance.", tendencies: "Overthinking and delaying decisions or keeping valuable insights to themselves due to a lack of confidence.", dialogue: { productive: "That’s a meaningful question—let’s explore it from a few different perspectives.", challenged: "Why won't anyone take the time to really think about these important questions?", growth: "Am I being thoughtful in my analysis, or just afraid to commit to a conclusion?" }, valueAlignments: ["Connected", "Kind"], valueRationale: "Their thoughtful feedback and nuanced advice demonstrate care and understanding." },
             // 15. GW / WG
             { name: "🌍 The Philosophical Motivator", letters: "GW / WG", coreStrength: "Being excitable, curious, and enthusiastic proponents of ideas and people, balancing eagerness with caution.", rank: 15, frequency: 3.03, type: "Mixed",
               interaction: [
                    "<strong class='wonder'>Wonder</strong> imagines powerful possibilities that <strong class='galvanizing'>Galvanizing</strong> can inspire others to pursue.",
                    "<strong class='galvanizing'>Galvanizing</strong> channels <strong class='wonder'>Wonder</strong>'s idealism into action by rallying people around visionary questions."
               ],
               cravesAndCrushes: {
                    craves: [
                        { genius: "W", text: "Consideration: Want people to genuinely consider their questions." },
                        { genius: "G", text: "Reaction: Want engagement and confirmation that their advocated cause is real/worthwhile." }
                    ],
                    crushes: [
                        { genius: "W", text: "Being dismissed: Dislike hearing \"Who cares!?\" or \"We don't have time for that.\"" },
                        { genius: "G", text: "Apathy: Hate when no one responds or enthusiasm is met with silence." }
                    ]
               },
               challenges: "The potential for impulsivity or unpredictability as they shift between passionate action and cautious reflection.", tendencies: "Jumping into initiatives without fully considering the implications or losing interest when initial enthusiasm wanes.", dialogue: { productive: "Imagine if we could do this! Let's get everyone excited about the possibilities.", challenged: "Why isn't everyone else as enthusiastic about these amazing opportunities as I am?", growth: "Am I being inspiring and visionary, or just easily distracted by new shiny objects?" }, valueAlignments: ["Courageous", "Empowering"], valueRationale: "They encourage others with a visionary approach, balancing enthusiasm and drive." }
         ];
        // This object maps pairing letters to inspirational quotes.
        const inspirationQuotes = {
             "ET / TE": `"Success is not in what you accomplish, but in the lasting impact of your results."`,
             "EG / GE": `"Encouragement transforms potential into action."`,
             "DE / ED": `"Insight is the bridge between vision and action."`,
             "EW / WE": `"Seeing the bigger picture inspires us to make a real difference."`,
             "DT / TD": `"A focused mind turns vision into achievement."`,
             "GT / TG": `"Bold actions inspire progress, even in the face of adversity."`,
             "EI / IE": `"Creativity flourishes when feedback meets responsive design."`,
             "DG / GD": `"Action guided by intuition sparks great change."`,
             "IT / TI": `"A well-planned strategy turns ideas into reality."`,
             "DI / ID": `"Innovation is nurtured by thoughtful experimentation."`,
             "TW / WT": `"Thoughtful action is the cornerstone of progress."`,
             "GI / IG": `"Innovation thrives on passion—and a shared vision."`,
             "IW / WI": `"Imagination is the seed; action is the fruit."`,
             "DW / WD": `"Wisdom is understanding the power of perspective."`,
             "GW / WG": `"Inspiration is the first step toward transformation."`
         };

        // --- State Variables ---
        let currentSort = 'alpha'; // Default sort is now 'alpha'
        let pairingsWithId = []; // To hold data with assigned unique IDs

        // --- Helper Functions ---

        // Returns the appropriate CSS class for the pairing type badge.
        function getTypeClass(type) { if (type === 'Responsive') return 'type-resp'; if (type === 'Disruptive') return 'type-disrupt'; if (type === 'Mixed') return 'type-mixed'; return ''; }
        // Returns the display text for the pairing type.
        function getTypeText(type) { if (type === 'Responsive') return "Double Responsive"; if (type === 'Disruptive') return "Double Disruptive"; if (type === 'Mixed') return "Mixed Pairing"; return type; }
        // Returns the tooltip text explaining the pairing type.
        function getTypeTooltip(type) { if (type === 'Responsive') return "Combines two Responsive Geniuses (W, D, E)."; if (type === 'Disruptive') return "Combines two Disruptive Geniuses (I, G, T)."; if (type === 'Mixed') return "Combines one Responsive (W, D, E) and one Disruptive (I, G, T) Genius."; return ''; }
        // Returns the SVG icon HTML for a given CHECK value.
        function getValueIcon(value) {
             const icons = {
                 courageous: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>`, // Shield
                 humble: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="8 12 12 16 16 12"/><line x1="12" y1="8" x2="12" y2="16"/></svg>`, // Down Arrow Circle
                 empowering: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`, // Lightning Bolt
                 connected: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>`, // Link
                 kind: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>` // Heart
             };
             return icons[value.toLowerCase()] || '';
         }

        // --- Grid Item Creation ---
        // Creates an HTML element for a single pairing card.
        function createGridItem(data) { // Accepts a pairing data object
            const itemDiv = document.createElement('div');
            itemDiv.className = 'pairing-card bg-white dark:bg-gray-800 border border-slate-200 dark:border-brand-teal-dark rounded-lg shadow-md p-4 cursor-pointer flex flex-col transition-colors duration-300';
            itemDiv.setAttribute('data-pairing-id', data.id); // Store the unique ID for modal lookup

            // Extract icon (emoji) and text from the name string
            const nameParts = data.name.match(/^(\W+)\s*(.*)$/) || [null, '', data.name];
            const icon = nameParts[1].trim();
            const nameText = nameParts[2].trim();

            // Set the inner HTML of the card
            itemDiv.innerHTML = `
                <p class="text-sm text-slate-500 dark:text-brand-gray-light/80 mb-1">Rank ${data.rank}/15 (${data.frequency.toFixed(1)}%)</p>
                <h3 class="text-base md:text-lg font-semibold text-brand-gray-dark dark:text-brand-gray-light mb-1 flex items-center gap-2">
                    <span class="pairing-icon">${icon}</span>
                    <span class="pairing-name-text">${nameText}</span>
                </h3>
                <p class="text-sm text-slate-500 dark:text-brand-gray-light/80">${data.letters}</p>
            `;

            // Add event listener to open the modal on click
            itemDiv.addEventListener('click', () => openModal(data.id)); // Pass ID to openModal
            // Add event listener for keyboard activation (Enter or Space)
            itemDiv.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault(); // Prevent default spacebar scroll
                    openModal(data.id); // Pass ID to openModal
                }
            });
            // Make the card focusable and announce its role
            itemDiv.setAttribute('tabindex', '0');
            itemDiv.setAttribute('role', 'button');
            itemDiv.setAttribute('aria-haspopup', 'dialog');
            itemDiv.setAttribute('aria-label', `View details for ${nameText}`);
            return itemDiv;
        }

        // --- Modal Functions ---
        // Get references to modal elements
        const modal = document.getElementById('pairing-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalSubtitle = document.getElementById('modal-subtitle');
        const modalCloseButton = document.getElementById('modal-close-button');
        const modalBackdrop = modal.querySelector('.modal-backdrop');
        const modalCoreStrength = document.getElementById('modal-core-strength');
        const modalPairingTypeBadge = document.getElementById('modal-pairing-type-badge');
        const modalPairingTypeTooltip = document.getElementById('modal-pairing-type-tooltip');
        const modalValueBadges = document.getElementById('modal-value-badges');
        const modalValueRationale = document.getElementById('modal-value-rationale');
        const modalQuote = document.getElementById('modal-quote');
        const modalInteraction = document.getElementById('modal-interaction');
        const modalCravesCrushes = document.getElementById('modal-craves-crushes'); // Reference to the container
        const modalChallenges = document.getElementById('modal-challenges');
        const modalTendencies = document.getElementById('modal-tendencies');
        const modalDialogueProductive = document.getElementById('modal-dialogue-productive');
        const modalDialogueChallenged = document.getElementById('modal-dialogue-challenged');
        const modalDialogueGrowth = document.getElementById('modal-dialogue-growth');
        const modalContent = modal.querySelector('.modal-content'); // For scrolling
        let previouslyFocusedElement = null; // To store focus before modal opens

        // Define the order for CHECK value badges
        const ALL_VALUES_ORDERED = ['Courageous', 'Humble', 'Empowering', 'Connected', 'Kind'];

        // Opens the modal and populates it with data for the given pairing ID.
        function openModal(pairingId) {
            // Find the pairing data object using the ID
            const data = pairingsWithId.find(p => p.id === pairingId);
            if (!data) {
                console.error("Could not find pairing data for ID:", pairingId);
                return; // Exit if data not found
            }

            // Store the currently focused element to return focus later
            previouslyFocusedElement = document.activeElement;

            // Populate modal header
            modalTitle.textContent = data.name;
            modalSubtitle.textContent = `Rank ${data.rank}/15 (${data.frequency.toFixed(1)}%) - ${data.letters}`;

            // Populate Overview section
            modalCoreStrength.textContent = data.coreStrength;
            modalPairingTypeBadge.textContent = getTypeText(data.type);
            modalPairingTypeBadge.className = `type-badge ${getTypeClass(data.type)}`; // Set class for color
            modalPairingTypeTooltip.textContent = getTypeTooltip(data.type);

            // Populate CHECK Value Alignment section
            const currentValues = data.valueAlignments || [];
            modalValueBadges.innerHTML = ALL_VALUES_ORDERED.map(value => {
                const isPresent = currentValues.includes(value);
                const valueLower = value.toLowerCase();
                // Apply active color or grayed-out style
                const badgeClasses = isPresent
                    ? `value-badge ${valueLower}`
                    : `value-badge value-badge-gray`;
                return `<span class="${badgeClasses}">
                           ${getValueIcon(value)}
                           ${value}
                        </span>`;
            }).join(''); // Join the array of HTML strings
            modalValueRationale.innerHTML = data.valueRationale
                ? data.valueRationale
                : `<span class="italic">No strong primary value alignment identified based on Genius alone.</span>`; // Fallback text

            // Populate Inspirational Quote section (using standardized letters as key)
            modalQuote.textContent = inspirationQuotes[data.letters] || 'No quote available.';

            // Populate Genius Interaction section (handling array of interaction points)
            modalInteraction.innerHTML = data.interaction.map(point => `<p>${point}</p>`).join('');

            // Populate Craves & Crushes section (Updated for Option 2)
            if (data.cravesAndCrushes && modalCravesCrushes) {
                let cravesHtml = '<div class="mb-2">'; // Add margin bottom to separate Craves/Crushes
                if (data.cravesAndCrushes.craves && data.cravesAndCrushes.craves.length > 0) {
                    cravesHtml += data.cravesAndCrushes.craves.map(item => `
                        <div class="modal-craves-crushes-item">
                           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-brand-lime dark:text-brand-lime"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                           <div>
                               <strong class="text-brand-lime dark:text-brand-lime">Craves</strong>
                               <span class="genius-label">(${item.genius})</span>: ${item.text}
                           </div>
                        </div>
                    `).join('');
                } else {
                    cravesHtml += `<p class="italic">No specific craves listed.</p>`;
                }
                 cravesHtml += '</div>';

                let crushesHtml = '<div>';
                if (data.cravesAndCrushes.crushes && data.cravesAndCrushes.crushes.length > 0) {
                    crushesHtml += data.cravesAndCrushes.crushes.map(item => `
                        <div class="modal-craves-crushes-item">
                           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-brand-coral dark:text-brand-coral"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                           <div>
                               <strong class="text-brand-coral dark:text-brand-coral">Crushed By</strong>
                               <span class="genius-label">(${item.genius})</span>: ${item.text}
                            </div>
                        </div>
                    `).join('');
                } else {
                    crushesHtml += `<p class="italic">No specific crushes listed.</p>`;
                }
                 crushesHtml += '</div>';

                modalCravesCrushes.innerHTML = cravesHtml + crushesHtml;
            } else if (modalCravesCrushes) {
                 modalCravesCrushes.innerHTML = '<p class="italic">Craves and Crushes information not available.</p>';
            }


            // Populate Challenges, Tendencies, and Dialogue sections
            modalChallenges.textContent = data.challenges;
            modalTendencies.textContent = data.tendencies;
            modalDialogueProductive.textContent = data.dialogue.productive;
            modalDialogueChallenged.textContent = data.dialogue.challenged;
            modalDialogueGrowth.textContent = data.dialogue.growth;

            // Show the modal with transitions
            modal.classList.remove('modal-hidden');
            modal.classList.add('modal-visible');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            modalContent.scrollTop = 0; // Scroll modal to top
            modalCloseButton.focus(); // Set focus to the close button for accessibility
        }

        // Closes the modal.
        function closeModal() {
            modal.classList.add('modal-hidden');
            modal.classList.remove('modal-visible');
            document.body.style.overflow = ''; // Restore background scrolling
             // Return focus to the element that opened the modal
             if (previouslyFocusedElement) {
                 previouslyFocusedElement.focus();
                 previouslyFocusedElement = null; // Clear the stored element
             }
        }

        // --- Sorting and Rendering Functions ---
        // Get references to grid container and sort buttons
        const gridContainer = document.getElementById('pairings-grid');
        const sortRankButton = document.getElementById('sort-rank-button');
        const sortAlphaButton = document.getElementById('sort-alpha-button');

        // Sorts the pairings data based on the selected criteria ('rank' or 'alpha').
        function sortData(sortBy) {
            const dataToSort = [...pairingsWithId]; // Create a copy to avoid modifying original
            if (sortBy === 'rank') {
                dataToSort.sort((a, b) => a.rank - b.rank); // Numeric sort by rank
            } else if (sortBy === 'alpha') {
                // Sort alphabetically by the 'letters' property
                dataToSort.sort((a, b) => {
                    return a.letters.localeCompare(b.letters); // String comparison
                });
            }
            currentSort = sortBy; // Update the current sort state
            return dataToSort; // Return the newly sorted array
        }

        // Renders the grid with the provided data.
        function renderGrid(dataToRender) {
            if (!gridContainer) return; // Exit if grid container not found
            gridContainer.innerHTML = ''; // Clear any existing grid items
            // Create and append a grid item for each pairing in the data
            dataToRender.forEach(pairing => {
                const item = createGridItem(pairing);
                gridContainer.appendChild(item);
            });
        }

        // Updates the visual state (active/inactive) of the sort buttons.
        function updateSortButtons() {
             if (!sortRankButton || !sortAlphaButton) return; // Exit if buttons not found
             // Set active class and aria-pressed based on currentSort state
             if (currentSort === 'rank') {
                 sortRankButton.classList.add('toggle-button-active');
                 sortRankButton.setAttribute('aria-pressed', 'true');
                 sortAlphaButton.classList.remove('toggle-button-active');
                 sortAlphaButton.setAttribute('aria-pressed', 'false');
             } else { // 'alpha' sort is active
                 sortAlphaButton.classList.add('toggle-button-active');
                 sortAlphaButton.setAttribute('aria-pressed', 'true');
                 sortRankButton.classList.remove('toggle-button-active');
                 sortRankButton.setAttribute('aria-pressed', 'false');
             }
        }

         // --- Theme Toggle Button Logic ---
         // Get references to theme buttons
         const themeLightButton = document.getElementById('theme-light-button');
         const themeDarkButton = document.getElementById('theme-dark-button');

         // Sets the theme (light/dark) on the HTML element and stores it.
         function setTheme(theme) {
             document.documentElement.className = theme; // Apply class to <html>
             localStorage.setItem('theme', theme); // Save preference
             updateThemeButtons(theme); // Update button states
         }

         // Updates the visual state (active/inactive) of the theme buttons.
         function updateThemeButtons(theme) {
             if (!themeLightButton || !themeDarkButton) return; // Exit if buttons not found
             // Set active class and aria-pressed based on the current theme
             if (theme === 'light') {
                 themeLightButton.classList.add('toggle-button-active');
                 themeLightButton.setAttribute('aria-pressed', 'true');
                 themeDarkButton.classList.remove('toggle-button-active');
                 themeDarkButton.setAttribute('aria-pressed', 'false');
             } else { // dark theme is active
                 themeDarkButton.classList.add('toggle-button-active');
                 themeDarkButton.setAttribute('aria-pressed', 'true');
                 themeLightButton.classList.remove('toggle-button-active');
                 themeLightButton.setAttribute('aria-pressed', 'false');
             }
         }


        // --- Initialization ---
        // Runs when the page content is fully loaded.
        window.addEventListener('load', () => {
            // Assign unique IDs to the data for easier lookup
            pairingsWithId = pairingsData.map(p => ({
                ...p, // Spread existing pairing data
                // Create a simple ID from letters, removing spaces and slashes (e.g., "ET/TE" -> "ETTE")
                id: p.letters.replace(/[\s/]/g, '')
            }));

            // Perform initial sort and render the grid
            const initiallySortedData = sortData(currentSort); // Sorts based on default 'alpha'
            renderGrid(initiallySortedData);
            updateSortButtons(); // Set initial active state for sort buttons

            // Add Sort Button Event Listeners
            if (sortRankButton) {
                sortRankButton.addEventListener('click', () => {
                    // Only re-sort and re-render if the sort order actually changes
                    if (currentSort !== 'rank') {
                        const sortedData = sortData('rank');
                        renderGrid(sortedData);
                        updateSortButtons();
                    }
                });
            }
            if (sortAlphaButton) {
                sortAlphaButton.addEventListener('click', () => {
                   // Only re-sort and re-render if the sort order actually changes
                   if (currentSort !== 'alpha') {
                       const sortedData = sortData('alpha');
                       renderGrid(sortedData);
                       updateSortButtons();
                   }
                });
            }

            // --- Theme Toggle Logic ---
            // Determine the initial theme (check localStorage, then system preference)
            const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            setTheme(currentTheme); // Apply the determined theme and set initial button state

            // Add Theme Button Event Listeners
            if (themeLightButton) {
                themeLightButton.addEventListener('click', () => setTheme('light'));
            }
            if (themeDarkButton) {
                themeDarkButton.addEventListener('click', () => setTheme('dark'));
            }

             // --- Modal Event Listeners ---
             // Close modal when the close button is clicked
             if(modalCloseButton) modalCloseButton.addEventListener('click', closeModal);
             // Close modal when the backdrop overlay is clicked
             if(modalBackdrop) modalBackdrop.addEventListener('click', closeModal);
             // Add keyboard listeners to the modal itself
             if(modal) {
                 modal.addEventListener('keydown', (event) => {
                     // Close modal on Escape key press
                     if (event.key === 'Escape') {
                         closeModal();
                     }
                     // Handle focus trapping within the modal on Tab key press
                     if (event.key === 'Tab') {
                          // Find all focusable elements within the modal
                          const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                          if (!focusableElements.length) return; // Exit if no focusable elements

                          const firstElement = focusableElements[0];
                          const lastElement = focusableElements[focusableElements.length - 1];

                          if (event.shiftKey) { // Shift + Tab (moving backwards)
                              // If focus is on the first element, wrap around to the last
                              if (document.activeElement === firstElement) {
                                  lastElement.focus();
                                  event.preventDefault(); // Prevent default tab behavior
                              }
                          } else { // Tab (moving forwards)
                              // If focus is on the last element, wrap around to the first
                              if (document.activeElement === lastElement) {
                                  firstElement.focus();
                                  event.preventDefault(); // Prevent default tab behavior
                              }
                          }
                     }
                 });
             }
        });
    </script>

</body>
</html>
